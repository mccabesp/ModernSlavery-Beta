@{
    Layout = "/Views/GdsLayout.cshtml";
}
@model GroupReviewViewModel
@if (!string.IsNullOrWhiteSpace(Model.BackUrl))
{
    <a class="govuk-back-link" href="@Model.BackUrl">Back</a>
}
<div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">
        @using (Html.BeginForm())
        {
            @await Html.GovUkValidationSummaryAsync();
            @Html.AntiForgeryToken();

            <h1 class="govuk-heading-l">
                @Model.PageTitle
            </h1>
            <div class="govuk-form-group">
                <fieldset class="govuk-fieldset">
                    <legend class="govuk-fieldset__legend govuk-fieldset__legend--s">
                        <h2 class="govuk-fieldset__heading">
                            for @(Model.OrganisationName) (@(Model.ReportingDeadlineYear-1) to @(Model.ReportingDeadlineYear))
                        </h2>
                    </legend>


                    <p class="govuk-body">
                        You’ve told us your statement is for the following group of organisations. You can add more organisations to the group, or remove organisations, before confirming and continuing.

                    </p>

                    <p class="govuk-body">
                        If your statement is for a single organisation, and not a group, you can return to the ‘Who is your statement for?’ page and <a class="govuk-link" href="@Model.GroupStatusUrl">specify a single organisation</a>.
                    </p>
                </fieldset>


                <table class="govuk-table organisation-list">
                    <thead class="govuk-table__head">
                        <tr class="govuk-table__row">
                            <th class="govuk-table__header">Organisation</th>
                            <th class="govuk-table__header"></th>
                        </tr>
                    </thead>
                    <tbody class="govuk-table__body">

                        @*The order of the list to be handled by controller*@
                        @for (var organisationIndex = 0; organisationIndex < Model.StatementOrganisations.Count; organisationIndex++)
                        {
                            <tr class="govuk-table__row">
                                <td class="govuk-table__cell">
                                    @*TODO: Blue items are actually from database and will be orgs that already have a statement of some sort*@
                                    @if (Model.StatementOrganisations[organisationIndex].OrganisationId != null)
                                    {
                                        <div class="govuk-inset-text">
                                            <p class="govuk-!-font-weight-bold govuk-blue">TODO: text to be added </p><br />
                                            <p class="govuk-!-font-weight-bold"> @(Model.StatementOrganisations[organisationIndex].OrganisationName)</p> <br />
                                            <p>@(Model.StatementOrganisations[organisationIndex].Address.GetFullAddress())</p><br />
                                            <p> Company number: @(Model.StatementOrganisations[organisationIndex].CompanyNumber)</p>
                                        </div>

                                    }
                                    else
                                    {
                                        <div>
                                            <p class="govuk-!-font-weight-bold"> @(Model.StatementOrganisations[organisationIndex].OrganisationName)</p> <br />
                                            <p class="">@(Model.StatementOrganisations[organisationIndex].Address.GetFullAddress())</p><br />
                                            <p>Company number: @(Model.StatementOrganisations[organisationIndex].CompanyNumber)</p>
                                        </div>
                                    }
                                </td>
                                <td class="govuk-table__cell buttons">
                                    <button type="submit" class="link-button" name="removeIndex" value="@organisationIndex">Remove</button>

                                </td>
                            </tr>
                        }
                    </tbody>
                </table>

                <button class="govuk-button govuk-!-margin-right-1" data-module="govuk-button" type="submit" name="command" value="@BaseViewModel.CommandType.Continue">
                    Confirm and continue
                </button>

            <a href="@Model.GroupSearchUrl" class="govuk-button govuk-button--secondary" data-module="govuk-button">
                Select more organisations
            </a>

                <button class="govuk-button govuk-button--secondary" data-module="govuk-button" type="submit" name="command" value="@BaseViewModel.CommandType.Cancel">
                    Cancel
                </button>

            </div>
        }
    </div>
</div>
