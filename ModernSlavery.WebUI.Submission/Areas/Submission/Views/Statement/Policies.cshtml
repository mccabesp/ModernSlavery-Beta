@using System.ComponentModel.DataAnnotations
@{
    Layout = "/Views/GdsLayout.cshtml";
}
@model ModernSlavery.WebUI.Submission.Presenters.StatementViewModel

<a class="govuk-back-link" href="@Url.Action("your-organisation")">Back</a>
<div class="govuk-grid-row">
    <div class="govuk-column-two-thirds">
        @using (Html.BeginForm())
        {
            var controller = ViewData["Controller"] as BaseController;

            @await Html.CustomValidationSummaryAsync();
            @Html.AntiForgeryToken();

            @(Html.GovUkErrorSummary(new[]
                {
                    nameof(ModernSlavery.WebUI.Submission.Presenters.StatementViewModel.StatementPolicies)
                }))

            <h1 class="govuk-heading-l">
                Policies
            </h1>

            <h2 class="govuk-heading-m">
                Do your organisation`s modern slavery policies or codes include any of the following provisions? (select all that apply)
            </h2>
            <details class="govuk-details" data-module="govuk-details">
                <summary class="govuk-details__summary">
                    <span class="govuk-details__summary-text">
                        What is this?
                    </span>
                </summary>
                <div class="govuk-details__text">
                    @*TODO: get content*@
                </div>
            </details>

             var organisationPolicyOptions =
                                 new Dictionary<ModernSlavery.WebUI.Submission.Presenters.StatementPolicies, Func<object, object>>
                                 {
                           {
                             ModernSlavery.WebUI.Submission.Presenters.StatementPolicies.Other,
    @<text>
        @(Html.GovUkTextInputFor(model => model.OtherPolicies))
        @(Html.LabelFor(model => model.OtherPolicies, new { @class = "govuk-label" }))
    </text>
                            }
                               };
            

            @(Html.GovUkCheckboxesFor(
                    model => model.StatementPolicies,
                    new FieldsetViewModel
                    {
                        Legend = new LegendViewModel
                        {
                            Classes = "govuk-fieldset__legend--m"
                        },
                        Classes = "govuk-!-margin-top-6"
                    },
                    new HintViewModel
                    {
                        Text = "Select all that apply."
                    },
                    organisationPolicyOptions
               ))

            <button class="govuk-button" data-module="govuk-button" type="submit">
                Continue
            </button>
            <button class="govuk-button govuk-button--secondary" data-module="govuk-button" type="submit">
                Cancel
            </button>
        }

    </div>

</div>
