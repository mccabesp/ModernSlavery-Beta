@using ModernSlavery.Core.Interfaces
@model StatementInfoViewModel
@{
    var reportingDeadline = Model.StatementInfo.ReportingDeadline.AddDays(-1);
    var reportDateFormatter = new GDSDateFormatter(reportingDeadline);
}
<div class="gpg-manage-reports__row">

    <div class="gpg-manage-reports__cell gpg-manage-reports__cell--year">
        @(reportingDeadline.Year-1)/@((reportingDeadline.Year).ToTwoDigitYear())
    </div>

    <div class="gpg-manage-reports__cell">
        <div>
            @if (!Model.StatementInfo.RequiredToReport)
            {
                <span>NOT REQUIRED TO REPORT</span>
            }
            else
            {
                <span>REQUIRED TO REPORT <br /> by @(reportDateFormatter.FullStartDate)</span>
            }
        </div>
        @if (Model.CanChangeScope)
        {
            <div>
                <a id="ChangeScope@(reportDateFormatter.StartYear)-@(Model.OrganisationIdentifier)" href="@(Url.Action("ChangeOrganisationScope", new {organisationIdentifier = Model.OrganisationIdentifier, reportingDeadlineYear=reportDateFormatter.StartYear}))">Change</a>
            </div>
        }
    </div>

    <div class="gpg-manage-reports__cell gpg-manage-reports__cell--action">
        <div>
            @if (Model.StatementInfo.SubmittedStatementModifiedDate == null)
            {
                <span>Your organisation has not reported</span>
            }
            else
            {
                <span>Reported </span>
                if (!Model.StatementInfo.RequiredToReport)
                {
                    <span>voluntarily</span>
                }
                var modifiedDateFormatter = new GDSDateFormatter(Model.StatementInfo.SubmittedStatementModifiedDate.Value);
                <span> on @modifiedDateFormatter.FullStartDate</span>
            }
        </div>
        <br />

        <a class="button" id="NewReport@(reportDateFormatter.StartYear)-@(Model.OrganisationIdentifier)" href="@Url.Action("BeforeYouStart", "Statement", new { organisationIdentifier = Model.OrganisationIdentifier, year = Model.StatementInfo.ReportingDeadline.Year })">
            <span>@Model.ButtonText</span>
        </a>
    </div>

</div>